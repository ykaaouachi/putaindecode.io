{"head":{"layout":"Post","comments":true,"date":"2013-12-05","title":"De jQuery à Vanilla JS","tags":["javascript","jquery","vanillajs"],"authors":["kud"],"header":{"image":"jquery-die.jpg","linearGradient":"160deg, rgb(204, 51, 51), rgba(204, 51, 51, .6)"},"description":"Oui alors jQuery, c'est sûrement très bien, ça simplifie pas mal de choses et le chaining est intéressant mais eeeest-ce que vous…"},"body":"<p>Oui alors jQuery, c'est sûrement très bien, ça simplifie pas mal de choses et le <em>chaining</em> est intéressant mais eeeest-ce que vous connaissez l'équivalent en <em>pur</em> JavaScript ? Pas sûr hein.</p>\n<p>Ce petit article vous propose de quoi peut-être vous faire changer d'avis sur la bibliothèque qui pèse tout de même environ ~80ko.</p>\n<p><em>Note : <a href=\"http://vanilla-js.com/\">Vanilla JS</a> n'est pas un framework mais veut simplement dire \"à nu\", c'est du JavaScript sans bibliothèque.</em></p>\n<p>C'est parti !</p>\n<h2 id=\"table-des-matières\"><a href=\"#table-des-mati%C3%A8res\" class=\"phenomic-HeadingAnchor\">#</a>Table des matières</h2>\n<ol>\n<li><a href=\"#-v-nements\">Évènements</a></li>\n<li><a href=\"#s-lecteurs\">Sélecteurs</a></li>\n<li><a href=\"#attributs\">Attributs</a></li>\n<li><a href=\"#classes\">Classes</a></li>\n<li><a href=\"#manipulation\">Manipulation</a></li>\n<li><a href=\"#navigation\">Navigation</a></li>\n<li><a href=\"#ajax\">AJAX</a></li>\n<li><a href=\"#jsonp\">JSONP</a></li>\n</ol>\n<h2 id=\"Évènements\"><a href=\"#%C3%89v%C3%A8nements\" class=\"phenomic-HeadingAnchor\">#</a>Évènements</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$(<span class=\"hljs-built_in\">document</span>).ready(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n})\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-built_in\">document</span>.addEventListener(<span class=\"hljs-string\">'DOMContentLoaded'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n})</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$(<span class=\"hljs-string\">'a'</span>).click(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-comment\">// code…</span>\n})\n\n<span class=\"hljs-comment\">// Vanilla</span>\n[].forEach.call(<span class=\"hljs-built_in\">document</span>.querySelectorAll(<span class=\"hljs-string\">'a'</span>), <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">el</span>) </span>{\n  el.addEventListener(<span class=\"hljs-string\">'click'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>) </span>{\n    <span class=\"hljs-comment\">// code…</span>\n  })\n})</code></pre>\n<h2 id=\"sélecteurs\"><a href=\"#s%C3%A9lecteurs\" class=\"phenomic-HeadingAnchor\">#</a>Sélecteurs</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">var</span> divs = $(<span class=\"hljs-string\">'div'</span>)\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> divs = <span class=\"hljs-built_in\">document</span>.querySelectorAll(<span class=\"hljs-string\">'div'</span>)</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">var</span> newDiv = $(<span class=\"hljs-string\">'&#x3C;div/>'</span>)\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> newDiv = <span class=\"hljs-built_in\">document</span>.createElement(<span class=\"hljs-string\">'div'</span>)</code></pre>\n<h2 id=\"attributs\"><a href=\"#attributs\" class=\"phenomic-HeadingAnchor\">#</a>Attributs</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$(<span class=\"hljs-string\">'img'</span>).filter(<span class=\"hljs-string\">':first'</span>).attr(<span class=\"hljs-string\">'alt'</span>, <span class=\"hljs-string\">'My image'</span>)\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-built_in\">document</span>.querySelector(<span class=\"hljs-string\">'img'</span>).setAttribute(<span class=\"hljs-string\">'alt'</span>, <span class=\"hljs-string\">'My image'</span>)</code></pre>\n<h2 id=\"classes\"><a href=\"#classes\" class=\"phenomic-HeadingAnchor\">#</a>Classes</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\nnewDiv.addClass(<span class=\"hljs-string\">'foo'</span>)\n\n<span class=\"hljs-comment\">// Vanilla</span>\nnewDiv.classList.add(<span class=\"hljs-string\">'foo'</span>)</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\nnewDiv.toggleClass(<span class=\"hljs-string\">'foo'</span>)\n\n<span class=\"hljs-comment\">// Vanilla</span>\nnewDiv.classList.toggle(<span class=\"hljs-string\">'foo'</span>)</code></pre>\n<h2 id=\"manipulation\"><a href=\"#manipulation\" class=\"phenomic-HeadingAnchor\">#</a>Manipulation</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$(<span class=\"hljs-string\">'body'</span>).append($(<span class=\"hljs-string\">'&#x3C;p/>'</span>))\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-built_in\">document</span>.body.appendChild(<span class=\"hljs-built_in\">document</span>.createElement(<span class=\"hljs-string\">'p'</span>))</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">var</span> clonedElement = $(<span class=\"hljs-string\">'#about'</span>).clone()\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> clonedElement = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">'about'</span>).cloneNode(<span class=\"hljs-literal\">true</span>)</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$(<span class=\"hljs-string\">'#wrap'</span>).empty()\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> wrap = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">'wrap'</span>)\n<span class=\"hljs-keyword\">while</span>(wrap.firstChild) wrap.removeChild(wrap.firstChild)</code></pre>\n<h2 id=\"navigation\"><a href=\"#navigation\" class=\"phenomic-HeadingAnchor\">#</a>Navigation</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">var</span> parent = $(<span class=\"hljs-string\">'#about'</span>).parent()\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> parent = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">'about'</span>).parentNode</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">if</span>($(<span class=\"hljs-string\">'#wrap'</span>).is(<span class=\"hljs-string\">':empty'</span>))\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">if</span>(!<span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">'wrap'</span>).hasChildNodes())</code></pre>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n<span class=\"hljs-keyword\">var</span> nextElement = $(<span class=\"hljs-string\">'#wrap'</span>).next()\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> nextElement = <span class=\"hljs-built_in\">document</span>.getElementById(<span class=\"hljs-string\">'wrap'</span>).nextSibling</code></pre>\n<h2 id=\"ajax\"><a href=\"#ajax\" class=\"phenomic-HeadingAnchor\">#</a>AJAX</h2>\n<h3 id=\"get\"><a href=\"#get\" class=\"phenomic-HeadingAnchor\">#</a>GET</h3>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$.get(<span class=\"hljs-string\">'//example.com'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n})\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> httpRequest = <span class=\"hljs-keyword\">new</span> XMLHttpRequest()\nhttpRequest.onreadystatechange = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n}\nhttpRequest.open(<span class=\"hljs-string\">'GET'</span>, url)\nhttpRequest.send()</code></pre>\n<h3 id=\"post\"><a href=\"#post\" class=\"phenomic-HeadingAnchor\">#</a>POST</h3>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$.post(<span class=\"hljs-string\">'//example.com'</span>, { <span class=\"hljs-attr\">username</span>: username }, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n})\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-keyword\">var</span> httpRequest = <span class=\"hljs-keyword\">new</span> XMLHttpRequest()\nhttpRequest.onreadystatechange = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n}\nhttpRequest.setRequestHeader(<span class=\"hljs-string\">'Content-Type'</span>, <span class=\"hljs-string\">'application/x-www-form-urlencoded'</span>)\nhttpRequest.open(<span class=\"hljs-string\">'POST'</span>, url)\nhttpRequest.send(<span class=\"hljs-string\">'username='</span> + <span class=\"hljs-built_in\">encodeURIComponent</span>(username))</code></pre>\n<h3 id=\"jsonp\"><a href=\"#jsonp\" class=\"phenomic-HeadingAnchor\">#</a>JSONP</h3>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// jQuery</span>\n$.getJSON(<span class=\"hljs-string\">'//openexchangerates.org/latest.json?callback=?'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n})\n\n<span class=\"hljs-comment\">// Vanilla</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">formatCurrency</span>(<span class=\"hljs-params\">data</span>) </span>{\n  <span class=\"hljs-comment\">// code</span>\n}\n<span class=\"hljs-keyword\">var</span> scr = <span class=\"hljs-built_in\">document</span>.createElement(<span class=\"hljs-string\">'script'</span>)\nscr.src = <span class=\"hljs-string\">'//openexchangerates.org/latest.json?callback=formatCurrency'</span>\n<span class=\"hljs-built_in\">document</span>.body.appendChild(scr)</code></pre>\n<p>Cela vous parait-il encore difficile de vous passer de jQuery ? :)</p>\n<p>Un grand merci à <a href=\"http://playground.deaxon.com/js/vanilla-js/\">@deaxon</a> qui est à l'origine de cet éclaircissement.</p>\n<h2 id=\"À-creuser\"><a href=\"#%C3%80-creuser\" class=\"phenomic-HeadingAnchor\">#</a>À creuser</h2>\n<p>Il existe une version minimaliste de jQuery basée sur la même API mais beaucoup plus légère s'appelant <a href=\"http://zeptojs.com/\">Zepto</a>. Il est actuellement utilisé en production sur le site mobile de ma boite.</p>\n","rawBody":"\nOui alors jQuery, c'est sûrement très bien, ça simplifie pas mal de choses et le _chaining_ est intéressant mais eeeest-ce que vous connaissez l'équivalent en _pur_ JavaScript ? Pas sûr hein.\n\nCe petit article vous propose de quoi peut-être vous faire changer d'avis sur la bibliothèque qui pèse tout de même environ ~80ko.\n\n_Note : [Vanilla JS](http://vanilla-js.com/) n'est pas un framework mais veut simplement dire \"à nu\", c'est du JavaScript sans bibliothèque._\n\nC'est parti !\n\n## Table des matières\n\n1. [Évènements](#-v-nements)\n2. [Sélecteurs](#s-lecteurs)\n3. [Attributs](#attributs)\n4. [Classes](#classes)\n5. [Manipulation](#manipulation)\n6. [Navigation](#navigation)\n7. [AJAX](#ajax)\n8. [JSONP](#jsonp)\n\n## Évènements\n\n```javascript\n// jQuery\n$(document).ready(function() {\n  // code\n})\n\n// Vanilla\ndocument.addEventListener('DOMContentLoaded', function() {\n  // code\n})\n```\n\n```javascript\n// jQuery\n$('a').click(function() {\n  // code…\n})\n\n// Vanilla\n[].forEach.call(document.querySelectorAll('a'), function(el) {\n  el.addEventListener('click', function() {\n    // code…\n  })\n})\n```\n\n## Sélecteurs\n\n```javascript\n// jQuery\nvar divs = $('div')\n\n// Vanilla\nvar divs = document.querySelectorAll('div')\n```\n\n```javascript\n// jQuery\nvar newDiv = $('<div/>')\n\n// Vanilla\nvar newDiv = document.createElement('div')\n```\n\n## Attributs\n\n```javascript\n// jQuery\n$('img').filter(':first').attr('alt', 'My image')\n\n// Vanilla\ndocument.querySelector('img').setAttribute('alt', 'My image')\n```\n\n## Classes\n\n```javascript\n// jQuery\nnewDiv.addClass('foo')\n\n// Vanilla\nnewDiv.classList.add('foo')\n```\n\n```javascript\n// jQuery\nnewDiv.toggleClass('foo')\n\n// Vanilla\nnewDiv.classList.toggle('foo')\n```\n\n## Manipulation\n\n```javascript\n// jQuery\n$('body').append($('<p/>'))\n\n// Vanilla\ndocument.body.appendChild(document.createElement('p'))\n```\n\n```javascript\n// jQuery\nvar clonedElement = $('#about').clone()\n\n// Vanilla\nvar clonedElement = document.getElementById('about').cloneNode(true)\n```\n\n```javascript\n// jQuery\n$('#wrap').empty()\n\n// Vanilla\nvar wrap = document.getElementById('wrap')\nwhile(wrap.firstChild) wrap.removeChild(wrap.firstChild)\n```\n\n## Navigation\n\n```javascript\n// jQuery\nvar parent = $('#about').parent()\n\n// Vanilla\nvar parent = document.getElementById('about').parentNode\n```\n\n```javascript\n// jQuery\nif($('#wrap').is(':empty'))\n\n// Vanilla\nif(!document.getElementById('wrap').hasChildNodes())\n```\n\n```javascript\n// jQuery\nvar nextElement = $('#wrap').next()\n\n// Vanilla\nvar nextElement = document.getElementById('wrap').nextSibling\n```\n\n## AJAX\n\n### GET\n```javascript\n// jQuery\n$.get('//example.com', function (data) {\n  // code\n})\n\n// Vanilla\nvar httpRequest = new XMLHttpRequest()\nhttpRequest.onreadystatechange = function (data) {\n  // code\n}\nhttpRequest.open('GET', url)\nhttpRequest.send()\n```\n\n### POST\n```javascript\n// jQuery\n$.post('//example.com', { username: username }, function (data) {\n  // code\n})\n\n// Vanilla\nvar httpRequest = new XMLHttpRequest()\nhttpRequest.onreadystatechange = function (data) {\n  // code\n}\nhttpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\nhttpRequest.open('POST', url)\nhttpRequest.send('username=' + encodeURIComponent(username))\n```\n\n### JSONP\n```javascript\n// jQuery\n$.getJSON('//openexchangerates.org/latest.json?callback=?', function (data) {\n  // code\n})\n\n// Vanilla\nfunction formatCurrency(data) {\n  // code\n}\nvar scr = document.createElement('script')\nscr.src = '//openexchangerates.org/latest.json?callback=formatCurrency'\ndocument.body.appendChild(scr)\n```\n\nCela vous parait-il encore difficile de vous passer de jQuery ? :)\n\nUn grand merci à [@deaxon](http://playground.deaxon.com/js/vanilla-js/) qui est à l'origine de cet éclaircissement.\n\n## À creuser\n\nIl existe une version minimaliste de jQuery basée sur la même API mais beaucoup plus légère s'appelant [Zepto](http://zeptojs.com/). Il est actuellement utilisé en production sur le site mobile de ma boite.\n","__filename":"fr/articles/js/de-jquery-a-vanillajs/index.md","__url":"/fr/articles/js/de-jquery-a-vanillajs/","__resourceUrl":"/fr/articles/js/de-jquery-a-vanillajs/index.html","__dataUrl":"/fr/articles/js/de-jquery-a-vanillajs/index.html.f28aa0b3e83c449c225bfa8958273b08.json"}